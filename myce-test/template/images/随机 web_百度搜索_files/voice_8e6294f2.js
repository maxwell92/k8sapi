(function(k){var f=function(){var v=new Blob(['function str2uint8(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(var r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}function init(e){sampleRate=e.sampleRate,outputChannels=e.outputChannels,outputSampleRate=e.outputSampleRate,uid=e.uid,uid||(uid="test_uid")}function record(e){recBuffersL.push(e[0]),outputChannels==2&&recBuffersR.push(e[1])}function exportWAV(e){var t,n=mergeBuffers(recBuffersL);if(outputChannels==2){var r=mergeBuffers(recBuffersR);t=interleave(n,r)}else t=n;var i=encodeWAV(t),s=new Blob([i],{type:e});return s}function getBuffer(){var e=[];return e.push(mergeBuffers(recBuffersL)),outputChannels==2&&e.push(mergeBuffers(recBuffersR)),e}function getSendBuffer(e){var t="-BD**VR+gzgzip",n="\\r\\n",r={pfm:"iOS&1&1&1&1",ver:"1.0",enc:"utf-8",rtn:"json",pdt:"818",app_name:"com.baidu.www.voice",idx:sendIdx++ +"",fun:"1",glb:glb,uid:uid};e&&(r.idx="-"+r.idx);var i=JSON.stringify(r),s=new Zlib.Gzip(str2uint8(i)),o=s.compress();if(sendOffset>=recBuffersL.length&&!e){sendIdx--;return null;}recBuffersL.slice(sendOffset);var u=mergeBuffers(recBuffersL.slice(sendOffset));sendOffset=recBuffersL.length;var a="--"+t,f=new ArrayBuffer(o.byteLength+4+u.length*2+(n.length+n.length+a.length)*3+2),l=new DataView(f),c=0;return c=writeString(l,c,n+a+n),c=writeUint8Array(l,c,o),c=writeString(l,c,n+a+n),l.setUint32(c,1,!0),c+=4,c=writePcm(l,c,u),c=writeString(l,c,n+a+"--"+n),{buffer:f,boundary:t,json:r}}function clear(){recBuffersL=[],recBuffersR=[]}function mergeBuffers(e){var t=0;e.forEach(function(e){t+=e.length});var n=new Float32Array(t),r=0,i;for(i=0;i<e.length;i++)n.set(e[i],r),r+=e[i].length;var s=0,o=sampleRate/outputSampleRate,u=Math.ceil(t*outputSampleRate/sampleRate),a=new Float32Array(u);for(i=0;i<u;i++)a[i]=n[Math.floor(s)],s+=o;return a}function interleave(e,t){var n=e.length+t.length,r=new Float32Array(n),i=0,s=0;while(i<n)r[i++]=e[s],r[i++]=t[s],s++;return r}function floatTo16BitPCM(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function writeUint8Array(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n[r]);return t+n.length}function writeString(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r));return t+n.length}function writePcm(e,t,n){return floatTo16BitPCM(e,t,n),t+n.length*2}function encodeWAV(e){var t=new ArrayBuffer(44+e.length*2),n=new DataView(t);return writeString(n,0,"RIFF"),n.setUint32(4,32+e.length*2,!0),writeString(n,8,"WAVE"),writeString(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,outputChannels,!0),n.setUint32(24,outputSampleRate,!0),n.setUint32(28,outputSampleRate,!0),n.setUint16(32,outputChannels*2,!0),n.setUint16(34,16,!0),writeString(n,36,"data"),n.setUint32(40,e.length*2,!0),floatTo16BitPCM(n,44,e),n}(function(){"use strict";function r(t,r){var i=t.split("."),s=n;!(i[0]in s)&&s.execScript&&s.execScript("var "+i[0]);for(var o;i.length&&(o=i.shift());)!i.length&&r!==e?s[o]=r:s=s[o]?s[o]:s[o]={}}function s(e,t){this.index="number"==typeof t?t:0,this.f=0,this.buffer=e instanceof(i?Uint8Array:Array)?e:new(i?Uint8Array:Array)(32768);if(2*this.buffer.length<=this.index)throw Error("invalid index");this.buffer.length<=this.index&&o(this)}function o(e){var t=e.buffer,n,r=t.length,s=new(i?Uint8Array:Array)(r<<1);if(i)s.set(t);else for(n=0;n<r;++n)s[n]=t[n];return e.buffer=s}function p(e,t,n){var r,i="number"==typeof t?t:t=0,s="number"==typeof n?n:e.length;r=-1;for(i=s&7;i--;++t)r=r>>>8^v[(r^e[t])&255];for(i=s>>3;i--;t+=8)r=r>>>8^v[(r^e[t])&255],r=r>>>8^v[(r^e[t+1])&255],r=r>>>8^v[(r^e[t+2])&255],r=r>>>8^v[(r^e[t+3])&255],r=r>>>8^v[(r^e[t+4])&255],r=r>>>8^v[(r^e[t+5])&255],r=r>>>8^v[(r^e[t+6])&255],r=r>>>8^v[(r^e[t+7])&255];return(r^4294967295)>>>0}function m(e){this.buffer=new(i?Uint16Array:Array)(2*e),this.length=0}function g(e,t){this.h=y,this.j=0,this.input=i&&e instanceof Array?new Uint8Array(e):e,this.c=0,t&&(t.lazy&&(this.j=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=i&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.c=t.outputIndex)),this.a||(this.a=new(i?Uint8Array:Array)(32768))}function E(e,t){this.length=e,this.k=t}function T(n,r){function s(e,n){var r=e.k,i=[],s=0,o;o=x[e.length],i[s++]=o&65535,i[s++]=o>>16&255,i[s++]=o>>24;var u;switch(t){case 1===r:u=[0,r-1,0];break;case 2===r:u=[1,r-2,0];break;case 3===r:u=[2,r-3,0];break;case 4===r:u=[3,r-4,0];break;case 6>=r:u=[4,r-5,1];break;case 8>=r:u=[5,r-7,1];break;case 12>=r:u=[6,r-9,2];break;case 16>=r:u=[7,r-13,2];break;case 24>=r:u=[8,r-17,3];break;case 32>=r:u=[9,r-25,3];break;case 48>=r:u=[10,r-33,4];break;case 64>=r:u=[11,r-49,4];break;case 96>=r:u=[12,r-65,5];break;case 128>=r:u=[13,r-97,5];break;case 192>=r:u=[14,r-129,6];break;case 256>=r:u=[15,r-193,6];break;case 384>=r:u=[16,r-257,7];break;case 512>=r:u=[17,r-385,7];break;case 768>=r:u=[18,r-513,8];break;case 1024>=r:u=[19,r-769,8];break;case 1536>=r:u=[20,r-1025,9];break;case 2048>=r:u=[21,r-1537,9];break;case 3072>=r:u=[22,r-2049,10];break;case 4096>=r:u=[23,r-3073,10];break;case 6144>=r:u=[24,r-4097,11];break;case 8192>=r:u=[25,r-6145,11];break;case 12288>=r:u=[26,r-8193,12];break;case 16384>=r:u=[27,r-12289,12];break;case 24576>=r:u=[28,r-16385,13];break;case 32768>=r:u=[29,r-24577,13];break;default:throw"invalid distance"}o=u,i[s++]=o[0],i[s++]=o[1],i[s++]=o[2];var a,f;a=0;for(f=i.length;a<f;++a)v[m++]=i[a];y[i[0]]++,b[i[3]]++,g=e.length+n-1,d=null}var o,u,a,f,l,c={},h,p,d,v=i?new Uint16Array(2*r.length):[],m=0,g=0,y=new(i?Uint32Array:Array)(286),b=new(i?Uint32Array:Array)(30),w=n.j,E;if(!i){for(a=0;285>=a;)y[a++]=0;for(a=0;29>=a;)b[a++]=0}y[256]=1,o=0;for(u=r.length;o<u;++o){a=l=0;for(f=3;a<f&&o+a!==u;++a)l=l<<8|r[o+a];c[l]===e&&(c[l]=[]),h=c[l];if(!(0<g--)){for(;0<h.length&&32768<o-h[0];)h.shift();if(o+3>=u){d&&s(d,-1),a=0;for(f=u-o;a<f;++a)E=r[o+a],v[m++]=E,++y[E];break}0<h.length?(p=N(r,o,h),d?d.length<p.length?(E=r[o-1],v[m++]=E,++y[E],s(p,0)):s(d,-1):p.length<w?d=p:s(p,0)):d?s(d,-1):(E=r[o],v[m++]=E,++y[E])}h.push(o)}return v[m++]=256,y[256]++,n.n=y,n.m=b,i?v.subarray(0,m):v}function N(e,t,n){var r,i,s=0,o,u,a,f,l=e.length;u=0,f=n.length;e:for(;u<f;u++){r=n[f-u-1],o=3;if(3<s){for(a=s;3<a;a--)if(e[r+a-1]!==e[t+a-1])continue e;o=s}for(;258>o&&t+o<l&&e[r+o]===e[t+o];)++o;o>s&&(i=r,s=o);if(258===o)break}return new E(s,t-i)}function C(e,t){var n=e.length,r=new m(572),s=new(i?Uint8Array:Array)(n),o,u,a,f,l;if(!i)for(f=0;f<n;f++)s[f]=0;for(f=0;f<n;++f)0<e[f]&&r.push(f,e[f]);o=Array(r.length/2),u=new(i?Uint32Array:Array)(r.length/2);if(1===o.length)return s[r.pop().index]=1,s;f=0;for(l=r.length/2;f<l;++f)o[f]=r.pop(),u[f]=o[f].value;a=k(u,u.length,t),f=0;for(l=o.length;f<l;++f)s[o[f].index]=a[f];return s}function k(e,t,n){function r(e){var n=f[e][l[e]];n===t?(r(e+1),r(e+1)):--u[n],++l[e]}var s=new(i?Uint16Array:Array)(n),o=new(i?Uint8Array:Array)(n),u=new(i?Uint8Array:Array)(t),a=Array(n),f=Array(n),l=Array(n),c=(1<<n)-t,h=1<<n-1,p,d,v,m,g;s[n-1]=t;for(d=0;d<n;++d)c<h?o[d]=0:(o[d]=1,c-=h),c<<=1,s[n-2-d]=(s[n-1-d]/2|0)+t;s[0]=o[0],a[0]=Array(s[0]),f[0]=Array(s[0]);for(d=1;d<n;++d)s[d]>2*s[d-1]+o[d]&&(s[d]=2*s[d-1]+o[d]),a[d]=Array(s[d]),f[d]=Array(s[d]);for(p=0;p<t;++p)u[p]=n;for(v=0;v<s[n-1];++v)a[n-1][v]=e[v],f[n-1][v]=v;for(p=0;p<n;++p)l[p]=0;1===o[n-1]&&(--u[0],++l[n-1]);for(d=n-2;0<=d;--d){m=p=0,g=l[d+1];for(v=0;v<s[d];v++)m=a[d+1][g]+a[d+1][g+1],m>e[p]?(a[d][v]=m,f[d][v]=t,g+=2):(a[d][v]=e[p],f[d][v]=p,++p);l[d]=0,1===o[d]&&r(d)}return u}function L(e){var t=new(i?Uint16Array:Array)(e.length),n=[],r=[],s=0,o,u,a,f;o=0;for(u=e.length;o<u;o++)n[e[o]]=(n[e[o]]|0)+1;o=1;for(u=16;o<=u;o++)r[o]=s,s+=n[o]|0,s<<=1;o=0;for(u=e.length;o<u;o++){s=r[e[o]],r[e[o]]+=1,a=t[o]=0;for(f=e[o];a<f;a++)t[o]=t[o]<<1|s&1,s>>>=1}return t}function A(e,t){this.input=e,this.c=this.i=0,this.d={},t&&(t.flags&&(this.d=t.flags),"string"==typeof t.filename&&(this.filename=t.filename),"string"==typeof t.comment&&(this.l=t.comment),t.deflateOptions&&(this.e=t.deflateOptions)),this.e||(this.e={})}var e=void 0,t=!0,n=this,i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;s.prototype.b=function(e,t,n){var r=this.buffer,i=this.index,s=this.f,u=r[i],a;n&&1<t&&(e=8<t?(h[e&255]<<24|h[e>>>8&255]<<16|h[e>>>16&255]<<8|h[e>>>24&255])>>32-t:h[e]>>8-t);if(8>t+s)u=u<<t|e,s+=t;else for(a=0;a<t;++a)u=u<<1|e>>t-a-1&1,8===++s&&(s=0,r[i++]=h[u],u=0,i===r.length&&(r=o(this)));r[i]=u,this.buffer=r,this.f=s,this.index=i},s.prototype.finish=function(){var e=this.buffer,t=this.index,n;return 0<this.f&&(e[t]<<=8-this.f,e[t]=h[e[t]],t++),i?n=e.subarray(0,t):(e.length=t,n=e),n};var u=new(i?Uint8Array:Array)(256),a;for(a=0;256>a;++a){for(var f=a,l=f,c=7,f=f>>>1;f;f>>>=1)l<<=1,l|=f&1,--c;u[a]=(l<<c&255)>>>0}var h=u,d=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],v=i?new Uint32Array(d):d;m.prototype.getParent=function(e){return 2*((e-2)/4|0)},m.prototype.push=function(e,t){var n,r,i=this.buffer,s;n=this.length,i[this.length++]=t;for(i[this.length++]=e;0<n;){if(r=this.getParent(n),!(i[n]>i[r]))break;s=i[n],i[n]=i[r],i[r]=s,s=i[n+1],i[n+1]=i[r+1],i[r+1]=s,n=r}return this.length},m.prototype.pop=function(){var e,t,n=this.buffer,r,i,s;t=n[0],e=n[1],this.length-=2,n[0]=n[this.length],n[1]=n[this.length+1];for(s=0;;){i=2*s+2;if(i>=this.length)break;i+2<this.length&&n[i+2]>n[i]&&(i+=2);if(!(n[i]>n[s]))break;r=n[s],n[s]=n[i],n[i]=r,r=n[s+1],n[s+1]=n[i+1],n[i+1]=r,s=i}return{index:e,value:t,length:this.length}};var y=2,b=[],w;for(w=0;288>w;w++)switch(t){case 143>=w:b.push([w+48,8]);break;case 255>=w:b.push([w-144+400,9]);break;case 279>=w:b.push([w-256+0,7]);break;case 287>=w:b.push([w-280+192,8]);break;default:throw"invalid literal: "+w}g.prototype.g=function(){var n,r,o,u,a=this.input;switch(this.h){case 0:o=0;for(u=a.length;o<u;){r=i?a.subarray(o,o+65535):a.slice(o,o+65535),o+=r.length;var f=r,l=o===u,c=e,h=e,p=e,d=e,v=e,m=this.a,g=this.c;if(i){for(m=new Uint8Array(this.a.buffer);m.length<=g+f.length+5;)m=new Uint8Array(m.length<<1);m.set(this.a)}c=l?1:0,m[g++]=c|0,h=f.length,p=~h+65536&65535,m[g++]=h&255,m[g++]=h>>>8&255,m[g++]=p&255,m[g++]=p>>>8&255;if(i)m.set(f,g),g+=f.length,m=m.subarray(0,g);else{d=0;for(v=f.length;d<v;++d)m[g++]=f[d];m.length=g}this.c=g,this.a=m}break;case 1:var w=new s(i?new Uint8Array(this.a.buffer):this.a,this.c);w.b(1,1,t),w.b(1,2,t);var E=T(this,a),S,x,N;S=0;for(x=E.length;S<x;S++)if(N=E[S],s.prototype.b.apply(w,b[N]),256<N)w.b(E[++S],E[++S],t),w.b(E[++S],5),w.b(E[++S],E[++S],t);else if(256===N)break;this.a=w.finish(),this.c=this.a.length;break;case y:var k=new s(i?new Uint8Array(this.a.buffer):this.a,this.c),A,O,M,_,D,P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H,B,j,I,q,R=Array(19),U,z,W,X,$;A=y,k.b(1,1,t),k.b(A,2,t),O=T(this,a),H=C(this.n,15),B=L(H),j=C(this.m,7),I=L(j);for(M=286;257<M&&0===H[M-1];M--);for(_=30;1<_&&0===j[_-1];_--);var J=M,K=_,Q=new(i?Uint32Array:Array)(J+K),G,Y,Z,et,tt=new(i?Uint32Array:Array)(316),nt,rt,it=new(i?Uint8Array:Array)(19);for(G=Y=0;G<J;G++)Q[Y++]=H[G];for(G=0;G<K;G++)Q[Y++]=j[G];if(!i){G=0;for(et=it.length;G<et;++G)it[G]=0}G=nt=0;for(et=Q.length;G<et;G+=Y){for(Y=1;G+Y<et&&Q[G+Y]===Q[G];++Y);Z=Y;if(0===Q[G])if(3>Z)for(;0<Z--;)tt[nt++]=0,it[0]++;else for(;0<Z;)rt=138>Z?Z:138,rt>Z-3&&rt<Z&&(rt=Z-3),10>=rt?(tt[nt++]=17,tt[nt++]=rt-3,it[17]++):(tt[nt++]=18,tt[nt++]=rt-11,it[18]++),Z-=rt;else if(tt[nt++]=Q[G],it[Q[G]]++,Z--,3>Z)for(;0<Z--;)tt[nt++]=Q[G],it[Q[G]]++;else for(;0<Z;)rt=6>Z?Z:6,rt>Z-3&&rt<Z&&(rt=Z-3),tt[nt++]=16,tt[nt++]=rt-3,it[16]++,Z-=rt}n=i?tt.subarray(0,nt):tt.slice(0,nt),q=C(it,7);for(X=0;19>X;X++)R[X]=q[P[X]];for(D=19;4<D&&0===R[D-1];D--);U=L(q),k.b(M-257,5,t),k.b(_-1,5,t),k.b(D-4,4,t);for(X=0;X<D;X++)k.b(R[X],3,t);X=0;for($=n.length;X<$;X++)if(z=n[X],k.b(U[z],q[z],t),16<=z){X++;switch(z){case 16:W=2;break;case 17:W=3;break;case 18:W=7;break;default:throw"invalid code: "+z}k.b(n[X],W,t)}var st=[B,H],ot=[I,j],ut,at,ft,lt,ct,ht,pt,dt;ct=st[0],ht=st[1],pt=ot[0],dt=ot[1],ut=0;for(at=O.length;ut<at;++ut)if(ft=O[ut],k.b(ct[ft],ht[ft],t),256<ft)k.b(O[++ut],O[++ut],t),lt=O[++ut],k.b(pt[lt],dt[lt],t),k.b(O[++ut],O[++ut],t);else if(256===ft)break;this.a=k.finish(),this.c=this.a.length;break;default:throw"invalid compression type"}return this.a};var S=function(){function e(e){switch(t){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case 12>=e:return[265,e-11,1];case 14>=e:return[266,e-13,1];case 16>=e:return[267,e-15,1];case 18>=e:return[268,e-17,1];case 22>=e:return[269,e-19,2];case 26>=e:return[270,e-23,2];case 30>=e:return[271,e-27,2];case 34>=e:return[272,e-31,2];case 42>=e:return[273,e-35,3];case 50>=e:return[274,e-43,3];case 58>=e:return[275,e-51,3];case 66>=e:return[276,e-59,3];case 82>=e:return[277,e-67,4];case 98>=e:return[278,e-83,4];case 114>=e:return[279,e-99,4];case 130>=e:return[280,e-115,4];case 162>=e:return[281,e-131,5];case 194>=e:return[282,e-163,5];case 226>=e:return[283,e-195,5];case 257>=e:return[284,e-227,5];case 258===e:return[285,e-258,0];default:throw"invalid length: "+e}}var n=[],r,i;for(r=3;258>=r;r++)i=e(r),n[r]=i[2]<<24|i[1]<<16|i[0];return n}(),x=i?new Uint32Array(S):S;A.prototype.g=function(){var t,n,r,s,o,u,a,f,l=new(i?Uint8Array:Array)(32768),c=0,h=this.input,d=this.i,v=this.filename,m=this.l;l[c++]=31,l[c++]=139,l[c++]=8,t=0,this.d.fname&&(t|=_),this.d.fcomment&&(t|=D),this.d.fhcrc&&(t|=M),l[c++]=t,n=(Date.now?Date.now():+(new Date))/1e3|0,l[c++]=n&255,l[c++]=n>>>8&255,l[c++]=n>>>16&255,l[c++]=n>>>24&255,l[c++]=0,l[c++]=O;if(this.d.fname!==e){a=0;for(f=v.length;a<f;++a)u=v.charCodeAt(a),255<u&&(l[c++]=u>>>8&255),l[c++]=u&255;l[c++]=0}if(this.d.comment){a=0;for(f=m.length;a<f;++a)u=m.charCodeAt(a),255<u&&(l[c++]=u>>>8&255),l[c++]=u&255;l[c++]=0}return this.d.fhcrc&&(r=p(l,0,c)&65535,l[c++]=r&255,l[c++]=r>>>8&255),this.e.outputBuffer=l,this.e.outputIndex=c,o=new g(h,this.e),l=o.g(),c=o.c,i&&(c+8>l.buffer.byteLength?(this.a=new Uint8Array(c+8),this.a.set(new Uint8Array(l.buffer)),l=this.a):l=new Uint8Array(l.buffer)),s=p(h,e,e),l[c++]=s&255,l[c++]=s>>>8&255,l[c++]=s>>>16&255,l[c++]=s>>>24&255,f=h.length,l[c++]=f&255,l[c++]=f>>>8&255,l[c++]=f>>>16&255,l[c++]=f>>>24&255,this.i=d,i&&c<l.length&&(this.a=l=l.subarray(0,c)),l};var O=255,M=2,_=8,D=16;r("Zlib.Gzip",A),r("Zlib.Gzip.prototype.compress",A.prototype.g)}).call(this);var createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}),recBuffersL=[],recBuffersR=[],outputChannels,outputSampleRate,sendOffset=0,glb=createUUID(),sendIdx=1,uid="",sampleRate;this.onmessage=function(e){var t;switch(e.data.command){case"reinit":recBuffersL=[],recBuffersR=[],sendOffset=0,sendIdx=1,glb=createUUID();break;case"init":init(e.data.config);break;case"record":record(e.data.buffer);break;case"exportWAV":t=exportWAV(e.data.type),this.postMessage({data:t,eventId:e.data.eventId});break;case"getBuffer":t=getBuffer(),this.postMessage({data:t,eventId:e.data.eventId});break;case"getSendBuffer":t=getSendBuffer(),this.postMessage({data:t,eventId:e.data.eventId});break;case"getLastSendBuffer":t=getSendBuffer(!0),this.postMessage({data:t,eventId:e.data.eventId});break;case"clear":clear()}};'],{type:"text/javascript"});
return URL.createObjectURL(v)};var g;var d;var q=0.1;var t=0.07;var b;var j="win7";var l={win7:"http://jingyan.baidu.com/article/e73e26c0f6832e24adb6a7b2.html",xp:"http://jingyan.baidu.com/article/375c8e19b8564125f2a229c7.html",mac:"https://support.apple.com/kb/index?page=search&locale=zh_CN&product=&q=os%20x%20%E8%BE%93%E5%85%A5%E9%9F%B3%E9%87%8F&src=support_site.kbase.search.searchresults"};var i=navigator.userAgent.match(/Windows NT ([\d\.]*)/);if(i){if(i[1]<=5.1){j="xp"}}else{if(i=navigator.userAgent.match(/Mac OS/)){j="mac"}}var h=function(y,B){if(y.ended){return false}if(!d){d=this.context=new AudioContext()}var G=this.source=d.createMediaStreamSource(y);var L=$.extend({timeout:5000},B);if(L.eq){}var J=L.bufferLen||4096;this.context=G.context;var x=1;var C=1;this.node=this.context.createScriptProcessor(J,x,C);var A=new Worker(L.workerPath||f());A.postMessage({command:"init",config:{outputChannels:C,outputSampleRate:8000,uid:Cookie.get("BAIDUID"),sampleRate:this.context.sampleRate}});
var I={};function K(N,P){var O=parseInt(Math.random()*100000)+"_"+new Date().getTime();if(N){N.eventId=O}A.postMessage(N);if(P){I[O]=P}}A.onmessage=function(N){if(N.data&&N.data.eventId&&typeof I[N.data.eventId]=="function"){I[N.data.eventId](N.data.data);I[N.data.eventId]=null}};var v=false;this.node.onaudioprocess=function(R){if(!v){return}var O=[],P;for(P=0;P<C;P++){O.push(R.inputBuffer.getChannelData(P))}K({command:"record",buffer:O});M.audioprocess.fire(R);var S=R.inputBuffer.getChannelData(0);var N=Math.max.apply(Math,S);var Q=0;$.each(S,function(T,U){Q+=Math.abs(U-N)});Q/=S.length;z.maxVolumn=Math.max(N,z.maxVolumn||0);z.maxAvgDiff=Math.max(Q,z.maxAvgDiff||0)};this.configure=function(N){for(var O in N){if(N.hasOwnProperty(O)){L[O]=N[O]}}};this.reinit=function(){A.postMessage({command:"reinit"});H=null};var w;this.start=function(){if(v){return}this.reinit();M.start.fire();D(this);v=true;w=setInterval(function(){D(z)},100);if(b){clearTimeout(b);b=null}this.maxVolumn=0;this.maxAvgDiff=0;
b=setTimeout(function(){clearTimeout(b);b=null;if(z.maxVolumn<q||z.maxAvgDiff<t){M.volumnLow.fire()}},3000)};var M={};var z=this;$.each(["audioprocess","stop","start","finish","stop","result","fail","noUserMedia","volumnLow"],function(N,O){M[O]=$.Callbacks();z["on"+O]=function(P){M[O].add(P)}});this.removeEventListener=function(N,O){if(typeof O=="undefined"){M[N].empty()}else{M[N].remove(O)}};if(y&&y.addEventListener){y.addEventListener("ended",function(){M.noUserMedia.fire();y.removeEventListener(arguments.callee)})}this.stop=function(N){if(v){if(N){$.each(E,function(O,P){P.abort()});E=[];if(H){M.finish.fire(H)}else{M.fail.fire()}v=false}else{D(this,true)}M.stop.fire(N)}clearInterval(w);if(b){clearTimeout(b);b=null}};this.clear=function(){K({command:"clear"},cb)};this.getBuffer=function(N){K({command:"getBuffer"},N)};this.getSendBuffer=function(N,O){var P=O?"getLastSendBuffer":"getSendBuffer";K({command:P},N)};this.exportWAV=function(N,O){K({command:"exportWAV",type:O},N)};G.connect(this.node);
this.node.connect(this.context.destination);var E=[];var H;var F=this.glb="";function D(N,O){if(!O&&E.length>4){return}N.getSendBuffer(function(Q){if(!Q){return}F=N.glb=Q.json.glb;var P=$.ajax({url:B.url,cache:false,contentType:"Content-Type: multipart/form-data; boundary="+Q.boundary,dataType:"text",data:Q.buffer,processData:false,type:"post"});E.push(P);P.always(function(R){if(R&&(typeof R=="string")){var S=R.match(/\"corpus\_no\"\:(\d+)/);if(S){S=S[1]}R=JSON.parse(R);if(R.result&&R.result.corpus_no&&S){R.result.corpus_no=S}}else{R=null}E=$.grep(E,function(T){return P!==T});if(!R||(R&&R.result&&R.result.err_no!=0)){N.stop(true);return}if(R&&R.content&&R.content.item){H=R;M.result.fire(R)}if((R&&R.result&&(R.result.res_type==3||R.result.res_type==5))||!R.result){N.stop(true)}if(O||(R&&R.result&&R.result.idx<0)){N.stop(true)}})},O)}};k.URL=k.URL||k.webkitURL;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;k.AudioContext=k.AudioContext||k.webkitAudioContext;
h.lowVolumnTipUrl=l[j];h.support=function(){if(!navigator.getUserMedia||!k.URL){return false}if(!k.AudioContext){return false}if(!k.Worker){return false}return true};h.log=function(){};var r,c=false;var m=$("body");function p(v){if(!c){var v=$.extend({top:0,"z-index":999},v);if(!r){r=$("<div id='_voice_mask' data-for='result'/>")}r.css({opacity:0.3,position:"absolute",background:"#000","z-index":v["z-index"],top:v.top+"px",left:"0",width:m.width(),height:m.height()-v.top});c=true;r.appendTo(m)}}function s(){if(r&&c){c=false;r.remove()}}var u=(function(){var w,y,A,z,x,B,v;return function(D){if(!w){w=$("<div id='voice' data-for='result'><div class='close'>x</div><div class='result'><span class='result-word'></span><span class='tip'></span></div><div class='voice_inner'><img class='btn' src='https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/voice/imgs/start_btn_9eb7d400.png'><div class='box'><div class='box_inner'></div></div><div class='round2'></div><div class='round1'></div><div class='round3'></div></div></div>");
y=$(".btn",w);A=$(".result-word",w);v=$(".tip",w);z=$(".box_inner",w);x=$(".round3",w);B=$(".round2,.round1",w)}v.mousedown(function(){h.log({q:"setVolumn"})});$(".close",w).click(function(){D.stop(true);D.closeUI();s();h.log({q:"close"})});D.closeUI=function(){w.remove();s()};D.openUI=function(){p();w.appendTo(m)};function C(){B.show();D.removeEventListener("audioprocess");D.onaudioprocess(function(I){var J=I.inputBuffer.getChannelData(0);var G=Math.max.apply(Math,J);var F=(1-G)*(1-G)*56;z.height(F);var H=G*100;x.css({width:H+100+"px",height:H+100+"px","border-radius":H+100+"px",margin:(71-H/2)+"px 0 0 -"+(H/2+50)+"px"})})}D.onnoUserMedia(function(){D.stop(true);D.closeUI();s()});D.onfinish(function(){D.closeUI();s();v.hide()});D.onresult(function(F){A.html(F.content.item[0]);v.hide()});D.onstart(function(){A.html("请说话");y.one("click",function(){E(D);A.html("识别中...");D.stop();h.log({q:"manual_stop"})});v.hide()});D.onfail(function(F){var G="识别失败，请点击下面按钮后再说一次";if(F&&F.result&&F.result.err_no=="-3005"){G="没听清楚，请点击下面按钮后再说一次"
}A.html(G);E(D);y.unbind("click").one("click",function(){D.start();C();h.log({q:"manual_restart"})})});D.onvolumnLow(function(){var F=h.lowVolumnTipUrl;v.html(' (音量小，请您检查麦克风设置，或参考<a href="'+F+'" target="_blank">这里</a>进行设置)').show()});function E(F){F.removeEventListener("audioprocess");x.get(0).style.cssText="";z.get(0).style.cssText="";B.hide()}D.start();C()}})();var n;h.showTip=function(){p();var v={"z-index":1000,"text-align":"center",position:"fixed"};if(bds&&bds.se&&bds.se.upn&&bds.se.upn.cookieset&&bds.se.upn.cookieset[0]&&bds.se.upn.cookieset[0].v==2){v=$.extend(v,{top:"0",right:"40px",width:"205px"})}else{v=$.extend(v,{top:"25%",right:"inherit",width:"100%"})}if(!n){n=$('<div><img src="https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/voice/imgs/allow_3d3dbb61.png" usemap="#voiceTipMap"/><map name="voiceTipMap"><area shape="circle" coords="13,55,8"></map></div>').css(v);n.find("area").click(function(){h.hideTip();h.log({q:"hideTip"})})}n.appendTo(m).show()};h.hideTip=function(){n.hide()};
var a=false,e;h.init=function(v){var x=$.Deferred();if(g){var w=new h(g,v);u(w);x.resolve(w)}else{navigator.getUserMedia({audio:true},function(z){g=z;if(!a){a=true;$(k).on("blur",function(){e=setTimeout(function(){if(g){g.stop();g=null}},10000)});$(k).on("focus",function(){if(e){clearTimeout(e);e=false}})}var y=new h(g,v);u(y);x.resolve(y)},function(){s();x.reject()})}return x};h.forceDownload=function(w,v){var x=URL.createObjectURL(w);var z=k.document.createElement("a");z.href=x;z.download=v||"output.wav";var y=document.createEvent("Event");y.initEvent("click",true,true);z.dispatchEvent(y)};function o(x,v){var y=document.createElement("div");var w='_<style type="text/css">';if(v){w="_<style type=\"text/css\" data-for='result'>"}y.innerHTML=w+x+"</style>";y.removeChild(y.firstChild);document.getElementsByTagName("HEAD")[0].appendChild(y.firstChild);return y.firstChild}h.addStartBtn=function(B){$('<span class="ipt_rec"></span>').prependTo($("#kw").parent());var v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAASCAYAAACAa1QyAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAXlJREFUKBW9kr1Kw1AUx5OYVWiRGqqLiPgIios4qg+QobhI7QdYH6CKk4IPUCRNQhFRHPIAnRykIIqre7cMsUMHp0Jt/J2ShiYWxx44/M/53/N17z2qkhLbtgtQl+g62kWvKpXKExiLFlsYzWbzCLgOw7A2HA6XVFU9Ez/i41A9tjAIutA0rVAqld4j/tl13cJoNLrHf5zEJjpBbvq+/zE5FIz8jWkuYXOfMEFETppPd5qV84ebX5Iu82azWd00zR+Zg+fmEdWZd/M8b6Hf7w9kvKDX661Eg3cdx9mK7DFQdBtDPlkhYRUI5J86uq4fgA4d6nR6sCzrOAiCN8MwduDvhAdF9tFX/lJrYNRbrdZiuVz2SDqHs/P5/EBQfOHlXOIkXsVQGMnicI2OZrFY/BZuWiSBtfLo6FPgZLxGmUymxrwNDj65ww3YzuVycleDQof4Ml6bONlFZdxpUpXF3MU+peIeuIx+McELeFutVjvg/5Jeneno+W3ELz3Rmg23qA6NAAAAAElFTkSuQmCC";
var z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAASCAMAAAC3taQAAAAAhFBMVEX///8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf8zhf+04UQDAAAAK3RSTlMAAQIDBgwNHR43ODs9PkNEVFZaXGZnlpecqaq31NfZ2t3e3+Dl6On5+/z9BL131wAAAHdJREFUCB0FwYcCgQAUAMBTFGWPaCGb9///5w5s+3e/BdgNy8lq2AH6AsUZ8EuQ/AABAhAgAAECECAgUjGCkH49c9cZZlfTh2ZvcymT8rKxb8xvmXX36day25xjm4GsPSGt7od8nB/uVQoW9Ste9QKAAAABAAL4AzokCI8/h6hiAAAAAElFTkSuQmCC";var A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAkCAMAAACg5NohAAAA7VBMVEUAAACqqqqZmZmqqqqfn5+Ojo6ZmZmVlZWdnZ2ZmZmfn5+WlpadnZ2Xl5ebm5uVlZWZmZmXl5eZmZmampqXl5eZmZmampqZmZmampqbm5uXl5eZmZmampqYmJiZmZmampqampqYmJiZmZmYmJiampqZmZmampqZmZmZmZmZmZmYmJiZmZmampqZmZmZmZmZmZmZmZmZmZmZmZmampqZmZmZmZmYmJiZmZmampqZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZlntL8zAAAATnRSTlMAAwUGCAkKDA0PEBEaGxwdHiAjJiwtMDc6PUBBTE1aXWBhZG1vcH5/goWGh4iKjo+UmZump6iuvr/AxcbI0tPZ297f5uft7vL09fb5+/48nAt9AAABHElEQVQoz93S21ZBURjF8T855BiSw06UUqiEcipKOW7s+f6P04XWGOw8QKN5Ndf4jfHdrAkm8Yf39XpUi/MrxaUkScuiW8pS9zwYtLpyyvsSt1XZtors/ZuP6pjaUWOPpJypOX24yG+qX3LR4f4vaSPvIfJqw1rHgOQx4pGAI62Z6BSYKmsoqylwogl9XQANvRh61hNQUJ+qmkDS1s1WrmUngaaqZDQLAZeOuvlAIN+VcwWEZsrAq+oApcV2NosSQF1vgKXVGUDsfmTbo/soQHolC6ClcXR/RLGxWgAEhvpM70r6S8PAtkaGWtXCBsK1lYYR8/K1Hc2bhYTXmyg051Lbt3PDGjj6iTOwXMtO3fUm0qR3m+JQXD/1N+gbnHtANlxuv2EAAAAASUVORK5CYII=";
var y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAkCAMAAACg5NohAAAA8FBMVEUsgf////8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf8sgf+F30pxAAAAT3RSTlMAAAMFBggJCgwNDxARGhscHR4gIyYsLTA3Oj1AQUxNWl1gYWRtb3B+f4KFhoeIio6PlJmbpqeorr6/wMXGyNLT2dve3+bn7e7y9PX2+fv+wE6fLAAAASxJREFUKM/d01dWAkEUBNAqkCBBBETCiKAoSlAElKSgKHGAqf3vxg/oQ9AFeKzPvh/vdPVr0CTy8L5cDsoRbEIYyc0lSZrnDqkgtS/8fqstp7BPEVvF9UlRdmSPHtUyM1qq7ZGUNpTWxwF5DXmlA6Ih/Htayf0bubXCUsckJZcRlwTgSEuMdEZyrJShlMYATjVCV5cka3ox9KwnAFl1UVKdZMzW7VpuZMcA1FVCUpMAyStH7YzPl2nLuQYQmCgJvqpCkvnZem1meQCo6I2gpcU5SZ5UB7Y9qIYBILGQRZANDcPk9l7AyVANEKSvr8/ELiW+1Petiwr1tSgHDQTLC/VDpkNP09G0no263dFsfSo1PTv1Wj1Hmzg962Dn4/edkTTq3MV/fAdun+Nv0TegC0JUU1yQZAAAAABJRU5ErkJggg==";B=B||".ipt_rec{z-index:1;display:none;position:absolute;right:0;height:34px;width:24px;background:url("+v+") no-repeat center;background-image: -webkit-image-set(url("+v+") 1x,url("+A+") 2x);background-image: -moz-image-set(url("+v+") 1x,url("+A+") 2x);background-image: -o-image-set(url("+v+") 1x,url("+A+") 2x);background-image: -ms-image-set(url("+v+") 1x,url("+A+") 2x);background-size:13px 18px;background-position:0 50%;cursor:pointer;}.ipt_rec:hover{background-image:url("+z+");background-image: -webkit-image-set(url("+z+") 1x,url("+y+") 2x);background-image: -moz-image-set(url("+z+") 1x,url("+y+") 2x);background-image: -o-image-set(url("+z+") 1x,url("+y+") 2x);background-image: -ms-image-set(url("+z+") 1x,url("+y+") 2x);}";
o(B,"forResult");if(k.bds&&bds.comm&&bds.comm.newindex){var x=$("#kw").parent().width()-30;var w=o(".ipt_rec{left:"+x+"px;top:3px}");$(k).one("index_off",function(){$(w).remove()})}};h.addStyle=function(){h.addStartBtn();var v='#voice{font-family:"microsoft yahei";z-index:1000;box-shadow:0 5px 5px #888;position:fixed;width:100%;height:38.2%;min-height:229.2px;background:#fff;font-size:16px;bottom:0}#voice .close{position:absolute;right:30px;top:20px;font-size:24px;color:#333;cursor:pointer;text-indent:-10000px;background:url(https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/voice/imgs/close_btn_37d4c318.png) no-repeat;background-size:18px 38px;width:20px;height:20px}#voice .close:hover{color:#999;background-position:0 -21px}#voice .voice_inner{margin:-40px auto 0;width:0}#voice .result{width:100%;font-size:22px;margin:40px 0 0 63px;text-align:left;}#voice .result .tip{color:#999;font-size:14px;}#voice .btn{position:absolute;width:105px;height:105px;margin:69px 0 0 -52px;z-index:3;cursor:pointer;background:none}#voice .box{width:56px;height:56px;position:absolute;z-index:2;background:#35d2ff;margin:92px 0 0 -28px}#voice .box_inner{width:100%;height:56px;background:#fff}@keyframes myfirst{from{border:1px solid rgba(0,0,255,1);width:100px;height:100px;border-radius:100px;margin:70px 0 0 -50px}to{border:1px solid rgba(0,0,255,0);width:200px;height:200px;border-radius:200px;margin:20px 0 0 -100px}}@-webkit-keyframes myfirst{from{border:1px solid rgba(194,224,253,1);width:100px;height:100px;border-radius:100px;margin:70px 0 0 -50px}to{border:1px solid rgba(194,224,253,0);width:300px;height:300px;border-radius:300px;margin:-30px 0 0 -150px}}@-moz-keyframes myfirst{from{border:1px solid rgba(0,0,255,1);width:100px;height:100px;border-radius:100px;margin:70px 0 0 -50px}to{border:1px solid rgba(0,0,255,0);width:200px;height:200px;border-radius:200px;margin:20px 0 0 -100px}}@-o-keyframes myfirst{from{border:1px solid rgba(0,0,255,1);width:100px;height:100px;border-radius:100px;margin:70px 0 0 -50px}to{border:1px solid rgba(0,0,255,0);width:200px;height:200px;border-radius:200px;margin:20px 0 0 -100px}}#voice .round1,#voice .round2{position:absolute;border:0 solid rgba(0,0,255,1);border-radius:200px;width:0;height:0;line-height:0;animation:myfirst 3s linear 0s infinite;-webkit-animation:myfirst 3s linear 0s infinite;-moz-animation:myfirst 3s linear 0s infinite;-o-animation:myfirst 3s linear 0s infinite}#voice .round2{animation-delay:1.5s;-webkit-animation-delay:1.5s;-moz-animation-delay:1.5s;-o-animation-delay:1.5s}#voice .round3{position:absolute;background:#c2e0fd;width:0;height:0;line-height:0}';
o(v,"forResult")};h.addMask=p;h.removeMask=s;h.addStyleEle=o;k.Recorder=h})(window);if(!Recorder.support()||location.href.match(/voice_flash=1/)){(function(){var d=Recorder.addStartBtn;var c=Recorder.addMask;var b=Recorder.removeMask;var a=Recorder.addStyleEle;var e=Recorder.lowVolumnTipUrl;(function(){var f="11.1.0";var m="playerProductInstall.swf";var i={};var j={};j.quality="high";j.bgcolor="#ffffff";j.allowscriptaccess="always";j.allowfullscreen="false";var l={};l.id="flash_recorder";l.name="flash_recorder";l.align="middle";var h=false;var g="https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/voice/imgs/start_btn_flash_b979ef7a.png";var r="https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/voice/imgs/start_btn_disabled_flash_e251372f.png";var k=/MSIE 6.0/.test(navigator.userAgent);$.each([g,r],function(t,u){var s=new Image();s.src=u});var o=function(t){var u=this;var s={timeout:5000,BlueMicoUrl:g,GrayMicoUrl:r,swfUrl:"https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/voice/js/flash_recorder_1b94f880.swf"};$.extend(u,s,t);
this.callbacks={};$.each(["stop","start","finish","result","fail","volumnLow"],function(v,w){u.callbacks[w]=$.Callbacks();u["on"+w]=function(x){u.callbacks[w].add(x)}})};o.addStyle=function(){d();var s="#voice{font-family:\"microsoft yahei\";overflow:hidden;z-index:1000;box-shadow:0 5px 5px #888;position:fixed;width:100%;height:38.2%;min-height:229.2px;background:#fff;font-size:16px;bottom:0;_position: absolute;_bottom: auto;_clear: both;_top:expression(eval(document.compatMode && document.compatMode=='CSS1Compat') ? documentElement.scrollTop+(documentElement.clientHeight-this.clientHeight) - 1 : document.body.scrollTop +(document.body.clientHeight-this.clientHeight) - 1);}#voice .close{z-index:1;display:block;position:absolute;right:30px;top:20px;font-size:0px;color:#333;cursor:pointer;text-indent:-10000px;background:url(https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/static/protocol/https/voice/imgs/mic_flash_afb8eb09.png) no-repeat;width:20px;height:20px;}#voice .close:hover{color:#999;background-position:0 -21px}#voice .voice_inner{margin:10px auto 0;width:280px;}#voice .result{width:100%;font-size:22px;padding-top:40px;text-indent:63px;text-align:left;position:absolute;left:0;}#voice .result .tip{color:#999;font-size:14px;}";
a(s,"forResult")};var p=(function(){var t,u,s;return function(v){if(!t){t=$("<div id='voice' data-for='result'><a href='javascript:void(0);' class='close'>x</a><div class='result'><span class='result-word'></span><span class='tip'></span></div><div class='voice_inner'><div id='voice_flashContent'></div></div></div>").appendTo("body");u=t.find(".result-word");s=$(".tip",t);swfobject.embedSWF(v.swfUrl,"voice_flashContent","280","280",f,m,i,j,l,function(w){v.swf=w.ref});c();$(".close",t).click(function(){if(!h){v.stop(true)}v.closeUI();b()});s.mousedown(function(){o.log({q:"setVolumn"})})}v.closeUI=function(){t.css("margin-left","-32767px");b()};v.openUI=function(){t.css("margin-left","0");c()};v.onstop(function(w){if(!w.notSendLastPack){u.html("识别中...")}});v.onfinish(function(){v.closeUI();b();s.hide()});v.onresult(function(w){u.html(w.content.item[0]);s.hide()});v.onstart(function(){u.html("请说话");s.hide()});v.onfail(function(w){var x="识别失败，请点击下面按钮后再说一次";if(w&&w.result&&w.result.err_no=="-3005"){x="没听清楚，请点击下面按钮后再说一次"
}u.html(x)});v.onvolumnLow(function(){var w=e;s.html(' (音量小，请您检查麦克风设置，或参考<a href="'+w+'" target="_blank">这里</a>进行设置)').show()});q.defer.done(function(){v.start()})}})();o.support=function(){return swfobject.hasFlashPlayerVersion(f)};o.flash_loaded=function(){q.defer.resolve(q.obj)};o.flash_noMicrophone=function(){q.obj.BlueMicoUrl=q.obj.GrayMicoUrl;q.obj.config();h=true;q.defer.reject()};o.recorder_enable=function(){h=false};o.recorder_disabled=function(){h=true};$.each(["start","stop","finish","result","fail","volumnLow"],function(s,t){o[t]=function(v){if(!q){throw new Error(t+" be called before recorder initial");return}var u=q.obj;v=v&&$.parseJSON(v);u.callbacks[t].fire(v)}});var q;o.init=function(t){var u=$.Deferred(),s=false;if(q){s=true}q=q||{};q.defer=u;q.obj=q.obj||new o(t);p(q.obj);if(s){u.resolve(q.obj)}return u};$.extend(o.prototype,{clear:function(){var t=this;for(var s in t.callbacks){t.callbacks[s].empty()}},config:function(){var s=this;if(!s.configed){s.swf.config(n({timeout:s.timeout,server:s.url,BlueMicoUrl:s.BlueMicoUrl,GrayMicoUrl:s.GrayMicoUrl}));
s.configed=true}},start:function(){var s=this;s.config();s.swf.startRecord()},stop:function(){this.swf.stopRecord()},close:function(){this.swf.closeRecord()}});function n(u){var s=[];for(var t in u){s.push('"'+t+'":"'+u[t]+'"')}return"{"+s.join(",")+"}"}window.Recorder=o})()})(window)}if(typeof define=="function"){define("Recorder",[],function(){return window.Recorder})};